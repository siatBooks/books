{
    "sourceFile": "src/ViewMain-test.java",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1743647391029,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1743647410621,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,312 @@\n+import java.util.*;\r\n+import java.util.stream.Collectors;\r\n+\r\n+public class ViewMain-test {\r\n+    private static final Random random = new Random();\r\n+    private static final String BORDER = \"âœ§âœ¦âœ§âœ¦âœ§âœ¦âœ§âœ¦âœ§âœ¦âœ§âœ¦âœ§âœ¦âœ§âœ¦âœ§âœ¦âœ§âœ¦âœ§âœ¦\";\r\n+    private static final String SUB_BORDER = \"â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\";\r\n+\r\n+    // ë„ì„œ ì •ë³´ í´ë˜ìŠ¤\r\n+    static class Book {\r\n+        String id;\r\n+        String title;\r\n+        String author;\r\n+        int basePrice;\r\n+        String type;\r\n+        String condition;\r\n+\r\n+        public Book(String id, String title, String author, int basePrice, String type, String condition) {\r\n+            this.id = id;\r\n+            this.title = title;\r\n+            this.author = author;\r\n+            this.basePrice = basePrice;\r\n+            this.type = type;\r\n+            this.condition = condition;\r\n+        }\r\n+\r\n+        public int getPrice() {\r\n+            return switch(condition) {\r\n+                case \"ìƒ\" -> (int)(basePrice * 0.7);\r\n+                case \"ì¤‘\" -> (int)(basePrice * 0.5);\r\n+                case \"í•˜\" -> (int)(basePrice * 0.3);\r\n+                default -> basePrice;\r\n+            };\r\n+        }\r\n+    }\r\n+\r\n+    // ê°œì„ ëœ Mock ë°ì´í„°ë² ì´ìŠ¤\r\n+    static class MockDB {\r\n+        private static final List<Book> masterBooks = Arrays.asList(\r\n+            new Book(\"B001\", \"Java Master\", \"í™ê¸¸ë™\", 35000, \"ë² ìŠ¤íŠ¸ì…€ëŸ¬\", \"new\"),\r\n+            new Book(\"B002\", \"Effective Java\", \"Joshua Bloch\", 45000, \"ë² ìŠ¤íŠ¸ì…€ëŸ¬\", \"ìƒ\"),\r\n+            new Book(\"B002-1\", \"Effective Java\", \"Joshua Bloch\", 45000, \"ë² ìŠ¤íŠ¸ì…€ëŸ¬\", \"ìƒ\"),\r\n+            new Book(\"B003\", \"Spring Boot Guide\", \"ì´ìˆœì‹ \", 30000, \"ì‹ ê°„\", \"ì¤‘\"),\r\n+            new Book(\"B003-1\", \"Spring Boot Guide\", \"ì´ìˆœì‹ \", 30000, \"ì‹ ê°„\", \"ì¤‘\"),\r\n+            new Book(\"B004\", \"React for Beginners\", \"Dan Abramov\", 35000, \"ì‹ ê°„\", \"í•˜\"),\r\n+            new Book(\"B005\", \"Python AI\", \"ì¥ì˜ì‹¤\", 28000, \"ì „ì²´\", \"new\"),\r\n+            new Book(\"B006\", \"Clean Code\", \"Robert C. Martin\", 40000, \"ì „ì²´\", \"ìƒ\"),\r\n+            new Book(\"B007\", \"ë””ìì¸ íŒ¨í„´ì˜ ì •ì„\", \"GoF\", 50000, \"ë² ìŠ¤íŠ¸ì…€ëŸ¬\", \"ì¤‘\"),\r\n+            new Book(\"B008\", \"ëª¨ë˜ ìë°”ìŠ¤í¬ë¦½íŠ¸\", \"ì´ì„  ë¸Œë¼ìš´\", 32000, \"ì‹ ê°„\", \"new\")\r\n+        );\r\n+\r\n+        private static List<Book> availableBooks = new ArrayList<>(masterBooks);\r\n+\r\n+        static List<Book> getBooks(String searchType) {\r\n+            return availableBooks.stream()\r\n+                .filter(book -> searchType.equals(\"ì „ì²´\") || book.type.equals(searchType))\r\n+                .collect(Collectors.toList());\r\n+        }\r\n+\r\n+        static void removeBook(String bookId) {\r\n+            availableBooks.removeIf(book -> book.id.equals(bookId));\r\n+        }\r\n+    }\r\n+\r\n+    // ë…ì„œ í†µê³„ ë©”ì‹œì§€\r\n+    private static final String[] PURCHASE_MESSAGES = {\r\n+        \"ì§€ê¸ˆê¹Œì§€ ì½ìœ¼ì‹  ì±…ì˜ ì´ í˜ì´ì§€ë¥¼ ìŒ“ìœ¼ë©´ ì—ë² ë ˆìŠ¤íŠ¸ ë†’ì´ì˜ 3ë°°ì— ë‹¬í•©ë‹ˆë‹¤.\",\r\n+        \"ë‹¹ì‹ ì´ ì½ì€ ì±…ë“¤ì„ ìŒ“ìœ¼ë©´ ë‚¨ì‚°íƒ€ì›Œ 15ê°œë¥¼ ì„¸ìš´ ë†’ì´ì…ë‹ˆë‹¤.\",\r\n+        \"ì˜¬í•´ ë…ì„œì— íˆ¬ìí•œ ì‹œê°„ì€ ì„œìš¸ì—ì„œ ë¶€ì‚°ê¹Œì§€ KTXë¡œ 20ë²ˆ ì™•ë³µí•  ìˆ˜ ìˆëŠ” ì‹œê°„ì…ë‹ˆë‹¤.\",\r\n+        \"ë‹¹ì‹ ì˜ ë…ì„œ ì‹œê°„ì€ ë„·í”Œë¦­ìŠ¤ ë“œë¼ë§ˆ 'ì˜¤ì§•ì–´ ê²Œì„' ì‹œë¦¬ì¦ˆë¥¼ 35ë²ˆ ë³¼ ìˆ˜ ìˆëŠ” ì‹œê°„ì…ë‹ˆë‹¤.\",\r\n+        \"ê° í˜ì´ì§€ê°€ í•œ ê±¸ìŒì´ë¼ë©´, ë‹¹ì‹ ì€ ì„œìš¸ì—ì„œ ë¶€ì‚°ê¹Œì§€ ë‘ ë²ˆ ì™•ë³µí•œ ê±°ë¦¬ë¥¼ ê±¸ì—ˆìŠµë‹ˆë‹¤!\",\r\n+        \"ë‹¹ì‹ ì´ ì½ì€ ì±…ì˜ í˜ì´ì§€ë¥¼ ì¼ë ¬ë¡œ ëŠ˜ì–´ë†“ìœ¼ë©´ í•œê°• ê¸¸ì´ì˜ 5ë°°ì— í•´ë‹¹í•©ë‹ˆë‹¤.\",\r\n+        \"ë‹¹ì‹ ì˜ ì „ìì±… ë…ì„œ ìŠµê´€ì€ ì†Œë‚˜ë¬´ 15ê·¸ë£¨ë¥¼ ì‚´ë ¸ìŠµë‹ˆë‹¤â€”ì—¬ì˜ë„ ê³µì›ì˜ 1/10ì— í•´ë‹¹í•˜ëŠ” ë©´ì ì…ë‹ˆë‹¤.\",\r\n+        \"ë‹¹ì‹ ì´ ì½ì€ ì±…ë“¤ì˜ ë¬´ê²ŒëŠ” ì¤‘í˜• ìŠ¹ìš©ì°¨ í•œ ëŒ€ì™€ ê°™ìŠµë‹ˆë‹¤.\",\r\n+        \"ì˜¬í•´ ì½ì€ ì±…ì˜ ë‘ê»˜ë¥¼ ëª¨ë‘ í•©ì¹˜ë©´ ëƒ‰ì¥ê³  ë†’ì´ì˜ 2ë°°ì…ë‹ˆë‹¤.\"\r\n+    };\r\n+\r\n+    // ì¶œíŒ íŠ¸ë Œë“œ ë©”ì‹œì§€\r\n+    private static final String[] TREND_MESSAGES = {\r\n+        \"ë‹¹ì‹ ì´ ì„ í˜¸í•˜ëŠ” ì¥ë¥´ì˜ í‰ê·  ê°€ê²©ì€ 2020ë…„ ì´í›„ 15% í•˜ë½í–ˆìŠµë‹ˆë‹¤.\",\r\n+        \"Aì¶œíŒì‚¬ëŠ” ì‹œì¥ ì ìœ ìœ¨ 30%ë¡œ ì„ ë‘ë¥¼ ë‹¬ë¦¬ê³ , Bì¶œíŒì‚¬ê°€ 20%ë¡œ ë’¤ë¥¼ ì‡ê³  ìˆìŠµë‹ˆë‹¤.\",\r\n+        \"ë†’ì€ í‰ì ì„ ë°›ì€ ì±…ë“¤ì€ ëŒ€ì²´ë¡œ ê°€ê²©ì´ ë‚®ê³  2020ë…„ ì´í›„ ì¶œê°„ëœ ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.\",\r\n+        \"ë¯¸ìŠ¤í„°ë¦¬ ì¥ë¥´ëŠ” ë‹¤ë¥¸ ì¥ë¥´ì— ë¹„í•´ ì¼ê´€ë˜ê²Œ ë†’ì€ í‰ì ì„ ë°›ê³  ìˆìŠµë‹ˆë‹¤.\"\r\n+    };\r\n+\r\n+    public static void main(String[] args) {\r\n+        Scanner scanner = new Scanner(System.in);\r\n+        clearScreen();\r\n+        \r\n+        printHeader(\"ì˜¨ë¼ì¸ ì„œì  ì‹œìŠ¤í…œ\");\r\n+        printSection(\"ë¡œê·¸ì¸\");\r\n+        System.out.print(\"â”œâ”€ ì„±ëª…: \");\r\n+        scanner.nextLine();\r\n+        System.out.print(\"â”œâ”€ ë¹„ë°€ë²ˆí˜¸: \");\r\n+        scanner.nextLine();\r\n+        \r\n+        home(scanner);\r\n+    }\r\n+\r\n+    private static void home(Scanner scanner) {\r\n+        while(true) {\r\n+            clearScreen();\r\n+            printHeader(\"ë©”ì¸ ë©”ë‰´\");\r\n+            printMenu(new String[]{\r\n+                \"1. ë„ì„œ ê²€ìƒ‰\", \r\n+                \"2. íšŒì› ì •ë³´\", \r\n+                \"3. ì£¼ë¬¸ ì´ë ¥\", \r\n+                \"4. ì¥ë°”êµ¬ë‹ˆ\",\r\n+                \"99. ì¢…ë£Œ\"\r\n+            });\r\n+            \r\n+            try {\r\n+                System.out.print(\"\\nâ–¶ ë©”ë‰´ ì„ íƒ: \");\r\n+                switch(scanner.nextInt()) {\r\n+                    case 1: searchFlow(scanner); break;\r\n+                    case 2: userFlow(scanner); break;\r\n+                    case 3: orderFlow(scanner); break;\r\n+                    case 4: cartFlow(scanner); break;\r\n+                    case 99: exit(scanner); break;\r\n+                    default: errorMsg(\"ì˜ëª»ëœ ì…ë ¥\");\r\n+                }\r\n+            } catch (Exception e) {\r\n+                errorHandler(scanner, e);\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    private static void searchFlow(Scanner scanner) {\r\n+        while(true) {\r\n+            clearScreen();\r\n+            printHeader(\"ë„ì„œ ê²€ìƒ‰\");\r\n+            printMenu(new String[]{\r\n+                \"1. ë² ìŠ¤íŠ¸ì…€ëŸ¬\", \r\n+                \"2. ì‹ ê°„ ë„ì„œ\", \r\n+                \"3. ì „ì²´ ê²€ìƒ‰\",\r\n+                \"0. í™ˆìœ¼ë¡œ\",\r\n+                \"99. ì¢…ë£Œ\"\r\n+            });\r\n+\r\n+            System.out.print(\"\\nâ–¶ ê²€ìƒ‰ ìœ í˜•: \");\r\n+            int type = scanner.nextInt();\r\n+            scanner.nextLine();\r\n+            \r\n+            if(type == 0) return;\r\n+            if(type == 99) exit(scanner);\r\n+            \r\n+            System.out.print(\"\\nğŸ” ê²€ìƒ‰ì–´ ì…ë ¥: \");\r\n+            String keyword = scanner.nextLine();\r\n+            \r\n+            List<Book> results = MockDB.getBooks(getSearchType(type)).stream()\r\n+                .filter(book -> book.title.contains(keyword))\r\n+                .collect(Collectors.toList());\r\n+                \r\n+            displayResults(results, keyword, scanner);\r\n+        }\r\n+    }\r\n+\r\n+    private static void displayResults(List<Book> books, String keyword, Scanner scanner) {\r\n+        clearScreen();\r\n+        printHeader(\"'\" + keyword + \"' ê²€ìƒ‰ ê²°ê³¼\");\r\n+        System.out.println(SUB_BORDER);\r\n+        \r\n+        if(books.isEmpty()) {\r\n+            System.out.println(\"\\nâš  ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤\");\r\n+            pause(scanner);\r\n+            return;\r\n+        }\r\n+\r\n+        System.out.println(\"\\n[ì •ë ¬ ì˜µì…˜]\");\r\n+        System.out.println(\"1. ê°€ê²© ë‚®ì€ ìˆœ 2. ê°€ê²© ë†’ì€ ìˆœ\");\r\n+        System.out.print(\"â–¶ ì„ íƒ: \");\r\n+        int sortOption = scanner.nextInt();\r\n+        scanner.nextLine();\r\n+\r\n+        if(sortOption == 1) {\r\n+            books.sort(Comparator.comparingInt(Book::getPrice));\r\n+        } else if(sortOption == 2) {\r\n+            books.sort((b1, b2) -> b2.getPrice() - b1.getPrice());\r\n+        }\r\n+\r\n+        int index = 1;\r\n+        for(Book book : books) {\r\n+            System.out.printf(\"\\n%d. %s\\n\", index++, book.title);\r\n+            System.out.printf(\"â”œâ”€ ì €   ì: %s\\n\", book.author);\r\n+            System.out.printf(\"â”œâ”€ ê°€   ê²©: %,dì›\\n\", book.getPrice());\r\n+            System.out.printf(\"â”œâ”€ ìœ    í˜•: %s\\n\", book.type);\r\n+            System.out.printf(\"â””â”€ ìƒ íƒœ: %s\\n\", book.condition.equals(\"new\") ? \"ì‹ ìƒí’ˆ\" : \"ì¤‘ê³ -\" + book.condition);\r\n+            System.out.println(SUB_BORDER);\r\n+        }\r\n+\r\n+        handleBookSelection(books, scanner);\r\n+    }\r\n+\r\n+    private static void handleBookSelection(List<Book> books, Scanner scanner) {\r\n+        System.out.print(\"\\nâ–¶ ìƒì„¸ë³´ê¸° í•  ë„ì„œ ë²ˆí˜¸ (0: ë’¤ë¡œê°€ê¸°): \");\r\n+        int choice = scanner.nextInt();\r\n+        scanner.nextLine();\r\n+\r\n+        if(choice == 0) return;\r\n+        if(choice < 1 || choice > books.size()) {\r\n+            errorMsg(\"ì˜ëª»ëœ ì„ íƒ\");\r\n+            return;\r\n+        }\r\n+\r\n+        showBookDetail(books.get(choice-1), scanner);\r\n+    }\r\n+\r\n+    private static void showBookDetail(Book book, Scanner scanner) {\r\n+        clearScreen();\r\n+        printHeader(\"[ìƒì„¸ ì •ë³´] \" + book.title);\r\n+        System.out.printf(\"â”œâ”€ ISBN: %s\\n\", book.id);\r\n+        System.out.printf(\"â”œâ”€ ì €   ì: %s\\n\", book.author);\r\n+        System.out.printf(\"â”œâ”€ ì •ê°€: %,dì›\\n\", book.basePrice);\r\n+        System.out.printf(\"â”œâ”€ íŒë§¤ê°€: %,dì›\\n\", book.getPrice());\r\n+        System.out.printf(\"â”œâ”€ ìœ    í˜•: %s\\n\", book.type);\r\n+        System.out.printf(\"â””â”€ ìƒ íƒœ: %s\\n\", book.condition.equals(\"new\") ? \"ì‹ ìƒí’ˆ\" : \"ì¤‘ê³ -\" + book.condition);\r\n+        System.out.println(SUB_BORDER);\r\n+\r\n+        printMenu(new String[]{\r\n+            \"1. ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€\", \r\n+            \"2. ë°”ë¡œêµ¬ë§¤\", \r\n+            \"0. ëŒì•„ê°€ê¸°\"\r\n+        });\r\n+        \r\n+        handlePurchaseChoice(book, scanner);\r\n+    }\r\n+\r\n+    private static void handlePurchaseChoice(Book book, Scanner scanner) {\r\n+        System.out.print(\"\\nâ–¶ ì„ íƒ: \");\r\n+        switch(scanner.nextInt()) {\r\n+            case 1: \r\n+                addToCart(book, scanner);\r\n+                break;\r\n+            case 2: \r\n+                processPurchase(book, scanner);\r\n+                break;\r\n+            case 0: \r\n+                return;\r\n+        }\r\n+    }\r\n+\r\n+    private static void addToCart(Book book, Scanner scanner) {\r\n+        System.out.print(\"\\nâ–¶ ìˆ˜ëŸ‰ ì…ë ¥: \");\r\n+        int qty = scanner.nextInt();\r\n+        System.out.printf(\"\\nâœ… %s %dê¶Œ ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€\\n\", book.title, qty);\r\n+        pause(scanner);\r\n+    }\r\n+\r\n+    private static void processPurchase(Book book, Scanner scanner) {\r\n+        System.out.print(\"\\nâ–¶ ìˆ˜ëŸ‰ ì…ë ¥: \");\r\n+        int qty = scanner.nextInt();\r\n+        System.out.printf(\"\\nâœ… [%s] %dê¶Œ êµ¬ë§¤ ì™„ë£Œ!\\n\", book.title, qty);\r\n+        System.out.println(\"ğŸ“Š \" + getRandomStat());\r\n+        MockDB.removeBook(book.id);\r\n+        pause(scanner);\r\n+    }\r\n+\r\n+    private static String getRandomStat() {\r\n+        return PURCHASE_MESSAGES[random.nextInt(PURCHASE_MESSAGES.length)]\r\n+            .formatted(random.nextDouble()*10, random.nextInt(50)+1, random.nextInt(20)+1);\r\n+    }\r\n+\r\n+    // ê¸°íƒ€ ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œ\r\n+    private static void printHeader(String title) {\r\n+        System.out.println(BORDER);\r\n+        System.out.printf(\"âœ¦\\t%s\\n\", title);\r\n+        System.out.println(BORDER);\r\n+    }\r\n+\r\n+    private static void printMenu(String[] items) {\r\n+        System.out.println(\"\\n\" + SUB_BORDER);\r\n+        for(String item : items) {\r\n+            System.out.printf(\"â”‚ %s\\n\", item);\r\n+        }\r\n+        System.out.println(SUB_BORDER);\r\n+    }\r\n+\r\n+    private static void clearScreen() {\r\n+        System.out.print(\"\\033[H\\033[2J\");\r\n+        System.out.flush();\r\n+    }\r\n+\r\n+    private static void pause(Scanner scanner) {\r\n+        System.out.print(\"\\nê³„ì†í•˜ë ¤ë©´ ì—”í„°ë¥¼ ëˆ„ë¥´ì„¸ìš”...\");\r\n+        scanner.nextLine();\r\n+    }\r\n+\r\n+    private static void errorMsg(String msg) {\r\n+        System.out.println(\"\\nâš  \" + msg);\r\n+    }\r\n+\r\n+    private static void exit(Scanner scanner) {\r\n+        System.out.println(\"\\nâ¤ ì´ìš©í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!\");\r\n+        System.exit(0);\r\n+    }\r\n+\r\n+    private static String getSearchType(int type) {\r\n+        return switch(type) {\r\n+            case 1 -> \"ë² ìŠ¤íŠ¸ì…€ëŸ¬\";\r\n+            case 2 -> \"ì‹ ê°„\";\r\n+            case 3 -> \"ì „ì²´\";\r\n+            default -> \"\";\r\n+        };\r\n+    }\r\n+\r\n+    private static void errorHandler(Scanner scanner, Exception e) {\r\n+        System.out.println(\"âš  ì˜¤ë¥˜ ë°œìƒ: \" + e.getMessage());\r\n+        scanner.nextLine();\r\n+    }\r\n+\r\n+    // ë‚˜ë¨¸ì§€ ë©”ì„œë“œ (userFlow, orderFlow, cartFlow ë“±)ëŠ” ê³µê°„ ê´€ê³„ìƒ ìƒëµ\r\n+}\r\n"
                }
            ],
            "date": 1743647391029,
            "name": "Commit-0",
            "content": ""
        }
    ]
}